<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏ã‡∏∑‡πâ‡∏≠ VIP - Coin TorrentDD</title>

<style>
:root {
  --bg-main: linear-gradient(135deg, #e9f7ef, #fdfefe);
  --card-bg: #fff;
  --primary: #28a745;
  --primary-dark: #1e8449;
  --border: #ccc;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  padding: 1rem;
  font-family: "Segoe UI", Tahoma, sans-serif;
  background: var(--bg-main);
}

.box {
  max-width: 420px;
  margin: auto;
  background: var(--card-bg);
  padding: 1.5rem;
  border-radius: 16px;
  box-shadow: 0 15px 30px rgba(0,0,0,.15);
}

h2 {
  text-align: center;
  color: var(--primary-dark);
}

label {
  margin-top: 12px;
  display: block;
  font-weight: bold;
}

input, select {
  width: 100%;
  padding: 10px;
  margin-top: 6px;
  border-radius: 10px;
  border: 1px solid var(--border);
}

button {
  width: 100%;
  margin-top: 16px;
  padding: 12px;
  border-radius: 12px;
  border: none;
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  color: #fff;
  font-weight: bold;
  cursor: pointer;
}

button:disabled { background: #aaa; }

.payment-box {
  margin-top: 16px;
  background: #f4fbf7;
  padding: 12px;
  border-left: 5px solid var(--primary);
  border-radius: 10px;
  font-size: 14px;
}

.payment-img img {
  width: 100%;
  margin-top: 10px;
  border-radius: 10px;
}

#preview {
  display: none;
  width: 100%;
  margin-top: 10px;
  border-radius: 10px;
}
</style>
</head>

<body>

<div class="box">
<h2>üíé ‡∏ã‡∏∑‡πâ‡∏≠ VIP / Coin TorrentDD</h2>

<form id="payForm">

  <!-- üì¶ PACKAGE (‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß) -->
  <label>üì¶ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à</label>
  <select name="package" required>
    <option value="" disabled selected>-- ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à --</option>

    <option>VIP 1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô - 200 ‡∏ö‡∏≤‡∏ó</option>
    <option>VIP 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô - 425 ‡∏ö‡∏≤‡∏ó</option>
    <option>VIP 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô - 750 ‡∏ö‡∏≤‡∏ó</option>
    <option>VIP 1 ‡∏õ‡∏µ - 1250 ‡∏ö‡∏≤‡∏ó</option>
    <option>VIP 2 ‡∏õ‡∏µ - 2050 ‡∏ö‡∏≤‡∏ó</option>

    <option>Coin 1,200 - 200 ‡∏ö‡∏≤‡∏ó</option>
    <option>Coin 3,000 - 425 ‡∏ö‡∏≤‡∏ó</option>
    <option>Coin 5,000 - 750 ‡∏ö‡∏≤‡∏ó</option>
    <option>Coin 9,000 - 1250 ‡∏ö‡∏≤‡∏ó</option>
    <option>Coin 15,000 - 2050 ‡∏ö‡∏≤‡∏ó</option>

    <option>Donation</option>
  </select>

  <label>üë§ Username TorrentDD</label>
  <input type="text" name="username" required>

  <label>üñº ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 3MB)</label>
  <input type="file" name="slip" accept="image/*" required>
  <img id="preview">

  <button id="sendBtn" type="submit">‚úÖ ‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</button>
</form>

<div class="payment-box">
  <div><b>Bank:</b> Krungthai Bank</div>
  <div><b>Account:</b> 986-3-03446-0</div>
  <div><b>PromptPay:</b> 0910541671</div>
  <div><b>TrueWallet:</b> 0830439347</div>
  <div><b>Name:</b> Akrapong Pengrod</div>
</div>

<div class="payment-img">
  <img src="https://s1.imgbb.ws/file/storage-sv1/giVH2.png" alt="QR">
</div>

</div>

<script>
/* ======================
   üî¥ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Telegram
====================== */
const BOT_TOKEN = "8265712317:AAET88mDq8GFJSN9zRys1wJ4AwPQ7hmtYbI";
const CHAT_ID  = "6678480860";

/* ‡∏Å‡∏±‡∏ô‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥ (reload ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏Å‡∏±‡∏ô) */
if (localStorage.getItem("paid")) {
  alert("‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß");
  document.getElementById("sendBtn").disabled = true;
}

let locked = false;

/* preview ‡∏£‡∏π‡∏õ + ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ç‡∏ô‡∏≤‡∏î */
document.querySelector('input[type=file]').addEventListener("change", e => {
  const file = e.target.files[0];
  if (!file) return;

  if (!file.type.startsWith("image/")) {
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û");
    e.target.value = "";
    return;
  }

  if (file.size > 3 * 1024 * 1024) {
    alert("‡πÑ‡∏ü‡∏•‡πå‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 3MB");
    e.target.value = "";
    return;
  }

  const img = document.getElementById("preview");
  img.src = URL.createObjectURL(file);
  img.style.display = "block";
});

document.getElementById("payForm").addEventListener("submit", async e => {
  e.preventDefault();
  if (locked) return;
  locked = true;

  const btn = document.getElementById("sendBtn");
  btn.disabled = true;
  btn.innerText = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á...";

  const form = e.target;
  const file = form.slip.files[0];
  const orderId = "ORD-" + Date.now();

  const caption =
`üíé ‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üÜî Order : ${orderId}
üë§ User : ${form.username.value}
üì¶ Package : ${form.package.value}
‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤ : ${new Date().toLocaleString("th-TH")}`;

  const data = new FormData();
  data.append("chat_id", CHAT_ID);
  data.append("caption", caption);
  data.append("photo", file);

  try {
    const res = await fetch(
      `https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`,
      { method: "POST", body: data }
    );

    if (res.ok) {
      localStorage.setItem("paid", "1");
      window.location.href = "success.html";
    } else {
      alert("‚ùå ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
      reset();
    }
  } catch {
    alert("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î");
    reset();
  }

  function reset() {
    locked = false;
    btn.disabled = false;
    btn.innerText = "‚úÖ ‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô";
  }
});
</script>

</body>
</html>

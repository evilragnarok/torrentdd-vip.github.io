<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Buy VIP / Coin TorrentDD</title>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    /* Styling for the page */
    :root {
      --bg: #e6f7f0;
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --main: #2ecc71;
      --dark: #27ae60;
      --border: #d1d5db;
    }

    body.dark {
      --bg: #0f172a;
      --card: #111827;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border: #1f2937;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 1rem;
      font-family: "Prompt", sans-serif;
      background: linear-gradient(135deg, var(--bg), #ffffff);
      color: var(--text);
      transition: .3s;
    }

    .box {
      max-width: 700px;
      width: 100%;
      margin: auto;
      background: var(--card);
      padding: 2rem;
      border-radius: 26px;
      box-shadow: 0 25px 45px rgba(0, 0, 0, .18);
    }

    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .lang-switch {
      display: flex;
      align-items: center;
      background: rgba(255, 255, 255, .65);
      backdrop-filter: blur(8px);
      border-radius: 999px;
      padding: 4px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, .15);
      gap: 6px;
    }

    .lang-switch button {
      border: none;
      background: transparent;
      padding: 6px 14px;
      border-radius: 999px;
      font-size: .75rem;
      cursor: pointer;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .lang-switch button.active {
      background: linear-gradient(135deg, var(--main), var(--dark));
      color: #fff;
      box-shadow: 0 0 12px rgba(46, 204, 113, .6);
    }

    .dark-toggle {
      cursor: pointer;
      font-size: 1.1rem;
      padding: 6px 10px;
      border-radius: 50%;
    }

    h2 {
      text-align: center;
      color: var(--dark);
    }

    .subtitle {
      text-align: center;
      color: var(--muted);
    }

    label {
      display: block;
      margin-top: 14px;
      font-weight: 500;
    }

    input, select {
      width: 100%;
      padding: 14px;
      margin-top: 6px;
      border-radius: 16px;
      border: 1px solid var(--border);
      background: var(--card);
      color: var(--text);
    }

    button {
      width: 100%;
      margin-top: 20px;
      padding: 16px;
      border: none;
      border-radius: 18px;
      background: linear-gradient(135deg, var(--main), var(--dark));
      color: #fff;
      font-weight: 600;
      cursor: pointer;
    }

    button:hover {
      box-shadow: 0 0 18px rgba(46, 204, 113, .55);
    }

    .payment-box {
      margin-top: 22px;
      background: #f0fdf4;
      padding: 16px;
      border-left: 6px solid var(--main);
      border-radius: 18px;
      font-size: .9rem;
    }

    body.dark .payment-box { background: #022c22; }

    #preview {
      width: 100%;
      margin-top: 14px;
      border-radius: 18px;
      display: none;
      border: 1px dashed var(--border);
    }

    .contact-box {
      margin-top: 14px;
      text-align: center;
      font-size: .85rem;
    }

    .contact-box a {
      color: var(--dark);
      font-weight: 500;
    }

    .contact-box div {
      font-size: 0.9rem;
      color: var(--muted);
      margin-top: 12px;
      text-align: center;
    }

    @media (max-width: 768px) {
      .box {
        padding: 1.5rem;
      }

      h2 {
        font-size: 1.25rem;
      }

      .lang-switch button {
        font-size: .65rem;
      }

      button {
        padding: 14px;
      }

      .payment-box {
        font-size: .8rem;
      }
    }

    @media (max-width: 480px) {
      .box {
        padding: 1rem;
      }

      h2 {
        font-size: 1rem;
      }

      button {
        padding: 12px;
      }

      .payment-box {
        font-size: .7rem;
      }
    }

  </style>
</head>

<body>

<div class="box">
  <div class="topbar">
    <div class="lang-switch">
      <button id="btnTH" onclick="setLang('th')">üáπüá≠</button>
      <button id="btnEN" onclick="setLang('en')">üá∫üá∏</button>
    </div>
    <div class="dark-toggle" onclick="toggleDark()">üåô</div>
  </div>
  
  <div class="payment-box">
     <h2 data-th="üíé ‡∏ã‡∏∑‡πâ‡∏≠ VIP / Coin TorrentDD" 
         data-en="üíé Buy VIP / Coin TorrentDD"></h2>
    <div style="text-align:center;margin-bottom:16px">
      <img src="https://s1.imgbb.ws/file/storage-sv1/giVH2.png" style="width:100%;max-width:320px;border-radius:18px">
    <div>
      <b>üí≥ Bank:</b> Krungthai Bank <br>
      <b>üè¶ Account:</b> 986-3-03446-0 <br>
      <b>üì± PromptPay:</b> 0910541671 <br>
      <b>üí∏ TrueWallet:</b> 0830439347 <br>
      <b>üìù Name:</b> Akrapong Pengrod
    </div>
  </div>
  <h2 data-th="üíé ‡πÅ‡∏à‡πâ‡∏á‡πÇ‡∏≠‡∏ô ‡πÅ‡∏•‡∏∞ ‡∏î‡∏π‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à" 
      data-en="üíé Notify Transfer and View Package Prices"></h2>

  <form id="payForm">
    <label data-th="üì¶ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à ‡πÅ‡∏•‡∏∞ ‡∏î‡∏π‡∏¢‡∏≠‡∏î‡πÇ‡∏≠‡∏ô" data-en="üì¶ Select package and view the transfer amount"></label>
    <select name="package" required>
      <option disabled selected data-th="-- ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à --" data-en="-- Select Package --"></option>
      <option data-th="VIP 1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô - ‡∏¢‡∏≠‡∏î‡πÇ‡∏≠‡∏ô 200 ‡∏ö‡∏≤‡∏ó" data-en="VIP 1 Month - Transfer Amount 200 THB"></option>
      <option data-th="VIP 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô - ‡∏¢‡∏≠‡∏î‡πÇ‡∏≠‡∏ô 425 ‡∏ö‡∏≤‡∏ó" data-en="VIP 3 Months - Transfer Amount 425 THB"></option>
      <option data-th="VIP 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô - ‡∏¢‡∏≠‡∏î‡πÇ‡∏≠‡∏ô 750 ‡∏ö‡∏≤‡∏ó" data-en="VIP 6 Months - Transfer Amount 750 THB"></option>
      <option data-th="VIP 1 ‡∏õ‡∏µ - ‡∏¢‡∏≠‡∏î‡πÇ‡∏≠‡∏ô 1,250 ‡∏ö‡∏≤‡∏ó" data-en="VIP 1 Year - Transfer Amount 1,250 THB"></option>
      <option data-th="VIP 2 ‡∏õ‡∏µ - ‡∏¢‡∏≠‡∏î‡πÇ‡∏≠‡∏ô 2,050 ‡∏ö‡∏≤‡∏ó" data-en="VIP 2 Years - Transfer Amount 2,050 THB"></option>
      <option data-th="Coin 1,200 - ‡∏¢‡∏≠‡∏î‡πÇ‡∏≠‡∏ô 200 ‡∏ö‡∏≤‡∏ó" data-en="Coin 1,200 - Transfer Amount 200 THB"></option>
      <option data-th="Coin 3,000 - ‡∏¢‡∏≠‡∏î‡πÇ‡∏≠‡∏ô 425 ‡∏ö‡∏≤‡∏ó" data-en="Coin 3,000 - Transfer Amount 425 THB"></option>
      <option data-th="Coin 5,000 - ‡∏¢‡∏≠‡∏î‡πÇ‡∏≠‡∏ô 750 ‡∏ö‡∏≤‡∏ó" data-en="Coin 5,000 - Transfer Amount 750 THB"></option>
      <option data-th="Coin 9,000 - ‡∏¢‡∏≠‡∏î‡πÇ‡∏≠‡∏ô 1,250 ‡∏ö‡∏≤‡∏ó" data-en="Coin 9,000 - Transfer Amount 1,250 THB"></option>
      <option data-th="Coin 15,000 - ‡∏¢‡∏≠‡∏î‡πÇ‡∏≠‡∏ô 2,050 ‡∏ö‡∏≤‡∏ó" data-en="Coin 15,000 - Transfer Amount 2,050 THB"></option>
      <option data-th="Donation (‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡∏Ñ‡πà‡∏≤‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡∏±‡∏á) ‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏•‡∏¢" data-en="Donation (Support site download cost) Will not get you anything."></option>
    </select>

    <label data-th="üë§ User In TorrentDD" data-en="üë§ TorrentDD Username"></label>
    <input name="username" required minlength="6" maxlength="16" pattern="[A-Za-z0-9]{6,16}" data-ph-th="‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (6‚Äì16 ‡∏ï‡∏±‡∏ß)" data-ph-en="English letters & numbers only (6‚Äì16 chars)" data-title-th="‡∏Å‡∏£‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß 6‚Äì16 ‡∏ï‡∏±‡∏ß" data-title-en="Use English letters and numbers only (6‚Äì16 characters)">

    <label data-th="üñº ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)" data-en="üñº Upload payment slip (optional)"></label>
    <input type="file" id="slip" accept="image/*">
    <img id="preview">

    <label data-th="üî¢ ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÇ‡∏≠‡∏ô 4 ‡∏ï‡∏±‡∏ß‡∏ó‡πâ‡∏≤‡∏¢ (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏•‡∏¥‡∏õ)" data-en="üî¢ Last 4 digits (if no slip)"></label>
    <input name="last4" maxlength="4" pattern="[0-9]{4}">

    <button id="sendBtn" data-th="‚úÖ ‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô" data-en="‚úÖ Submit Payment"></button>
  </form>

  <div class="contact-box">
    üì© Contact :
    <a href="https://www.torrentdd.com/sendmessage.php?receiver=973308" target="_blank">3vilr4gn4r0k</a>
    <div data-th="üï∞Ô∏è ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£: 8:00 ‡∏ô. - 00:00 ‡∏ô. (‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏ó‡∏¢)
    ‚è∞ ‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 00:01 ‡∏ô. - 7:59 ‡∏ô. ‡∏´‡∏≤‡∏Å‡∏≠‡∏¢‡∏π‡πà ‡∏à‡∏∞‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    ‚è∞ ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà ‡∏à‡∏∞‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£"
         data-en="
         üï∞Ô∏è Working Hours: 8:00 AM - 00:00 AM (Thailand Time)
         ‚è∞ After 00:01 AM - 7:59 AM, if you are available, we will send it to you.
         If not, we will process it during working hours.
         ‚è∞ We will send it to you. If not, we will process it during working hours.
         "></div>
  </div>

</div>

<script>
// Bot Telegram Configuration
const BOT_TOKEN = "8265712317:AAET88mDq8GFJSN9zRys1wJ4AwPQ7hmtYbI";
const CHAT_ID = "6678480860";

// Language and Dark Mode
let lang = localStorage.lang || "th";
let dark = localStorage.dark === "1";
let slipFile = null;

function applyLang() {
  document.querySelectorAll("[data-th]").forEach(el => {
    el.innerText = el.dataset[lang];
  });
  document.querySelectorAll("option[data-th]").forEach(opt => {
    opt.text = opt.dataset[lang];
  });
  document.querySelectorAll("[data-ph-th]").forEach(el => {
    el.placeholder = lang === "th" ? el.dataset.phTh : el.dataset.phEn;
  });
  document.querySelectorAll("[data-title-th]").forEach(el => {
    el.title = lang === "th" ? el.dataset.titleTh : el.dataset.titleEn;
  });
  btnTH.classList.toggle("active", lang === "th");
  btnEN.classList.toggle("active", lang === "en");
  localStorage.lang = lang;
}

function setLang(l) {
  lang = l;
  applyLang();
}

function toggleDark() {
  dark = !dark;
  document.body.classList.toggle("dark", dark);
  localStorage.dark = dark ? "1" : "0";
}

slip.addEventListener("change", e => {
  const file = e.target.files[0];
  if (!file) return;
  slipFile = file;
  const reader = new FileReader();
  reader.onload = () => {
    preview.src = reader.result;
    preview.style.display = "block";
  };
  reader.readAsDataURL(file);
});

payForm.addEventListener("submit", async e => {
  e.preventDefault();
  const f = e.target;
  const username = f.username.value.trim();
const profileLink = `https://www.torrentdd.com/userdetails.php?username=${username}`;
const last4 = f.last4.value.trim();
const package = f.package.options[f.package.selectedIndex].text;
const time = new Date().toLocaleString("th-TH", { timeZone: "Asia/Bangkok" });

  // Ensure either a slip or last 4 digits are provided
  if (!slipFile && !last4) {
    alert(getMessage("pleaseUploadOrEnter"));
    return;
  }

  let message = `
*üíé New Payment Request:*

üë§ *Username*: ${username}
üîó *Profile*: ${profileLink}
üì¶ *Package*: ${package}
üï∞Ô∏è *Time*: ${time}
`;

  if (slipFile) {
    message += `üñºÔ∏è *Payment Slip Attached*`;
  } else {
    message += `üî¢ *Last 4 Digits*: ${last4}`;
    message += "\n=============================="; // Add line only if slip is uploaded
  }

  // Show the "submitted" alert immediately
  alert(getMessage("submittedSuccess"));

  try {
  // Send the payment information to Telegram
  await sendToTelegram(message, slipFile);

  // üëâ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ
  window.location.href = "https://www.torrentdd.com/inbox.php";

  // Reset the form and page after a short delay
  setTimeout(() => {
    payForm.reset();
    preview.style.display = "none";
    slipFile = null;
    applyLang();
    document.body.classList.toggle("dark", dark);
  }, 1000);

} catch (error) {
  alert(getMessage("error"));
}
  
});

// Function to get alert messages based on language
function getMessage(key) {
  const messages = {
    th: {
      pleaseUploadOrEnter: "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç 4 ‡∏ï‡∏±‡∏ß‡∏ó‡πâ‡∏≤‡∏¢",
      submittedSuccess: "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß  !!!",
      error: "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"
    },
    en: {
      pleaseUploadOrEnter: "Please upload the slip or enter the last 4 digits",
      submittedSuccess: "Your information has been submitted successfully. !!!",
      error: "Error submitting data"
    }
  };
  return messages[lang][key];
}

async function sendToTelegram(message, slipFile) {
  try {
    // Send message to Telegram
    const formDataMessage = new FormData();
    formDataMessage.append('chat_id', CHAT_ID);
    formDataMessage.append('text', message);

    const responseMessage = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
      method: 'POST',
      body: formDataMessage,
    });

    const dataMessage = await responseMessage.json();
    console.log('Telegram response (message):', dataMessage);
    
    if (!dataMessage.ok) {
      throw new Error(`Error: ${dataMessage.description}`);
    }

    // If there is a slip, send the file
    if (slipFile) {
      const formDataFile = new FormData();
      formDataFile.append('chat_id', CHAT_ID);
      formDataFile.append('document', slipFile);

      const responseFile = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendDocument`, {
        method: 'POST',
        body: formDataFile,
      });

      const dataFile = await responseFile.json();
      console.log('Telegram response (file):', dataFile);

      if (!dataFile.ok) {
        throw new Error(`Error: ${dataFile.description}`);
      }

      // Add the line separator after sending the slip
      const separatorMessage = '\n==============================\n';
      
      // Send the separator message
      const formDataSeparator = new FormData();
      formDataSeparator.append('chat_id', CHAT_ID);
      formDataSeparator.append('text', separatorMessage);

      const responseSeparator = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        body: formDataSeparator,
      });

      const dataSeparator = await responseSeparator.json();
      console.log('Telegram response (separator):', dataSeparator);

      if (!dataSeparator.ok) {
        throw new Error(`Error: ${dataSeparator.description}`);
      }
    }
  } catch (error) {
    console.error('Error sending to Telegram:', error);  // Log the error
    throw error;
  }
}

document.body.classList.toggle("dark", dark);
applyLang();
</script>

</body>
</html>
